-- <- 옆에서 테이블 확인 후 현재 존재하는 테이블만 DROP TABLE 명령어 수행
DROP TABLE ASSIGNMENT;
DROP TABLE ENTERPRISE;
DROP TABLE LECTURE;
DROP TABLE MEMBER;

-- 밑에 명령어로 SEQUENCE 확인 후 있는 것만 DROP SEQUENCE
SELECT * FROM USER_SEQUENCES;
drop sequence seq_id;
drop sequence ent_id;
drop sequence lec_id;
COMMIT;

CREATE TABLE "SCH"."MEMBER" 
   (	"SEQ_ID" NUMBER, 
	"MEM_ID" VARCHAR2(255 BYTE) NOT NULL UNIQUE ENABLE, 
	"MEM_PW" VARCHAR2(255 BYTE) NOT NULL ENABLE, 
	"MEM_NAME" VARCHAR2(255 BYTE) NOT NULL ENABLE, 
	 PRIMARY KEY ("SEQ_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;


CREATE TABLE "SCH"."ENTERPRISE" 
   (	"ENT_ID" NUMBER, 
	"ENT_NAME" VARCHAR2(255 BYTE) NOT NULL ENABLE, 
	"PAPER_END" DATE, 
	"INTERVIEW1" DATE, 
	"INTERVIEW2" DATE, 
	"INTERVIEW3" DATE, 
	"SEQ_ID" NUMBER NOT NULL ENABLE, 
	 PRIMARY KEY ("ENT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE, 
	 CONSTRAINT "SEQ_FK" FOREIGN KEY ("SEQ_ID")
	  REFERENCES "SCH"."MEMBER" ("SEQ_ID") ON DELETE CASCADE ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

  CREATE TABLE "SCH"."LECTURE" 
   (	"LEC_ID" NUMBER, 
	"LEC_NAME" VARCHAR2(255 BYTE) NOT NULL ENABLE, 
	"LEC_START" DATE, 
	"LEC_END" DATE, 
	"SEQ_ID" NUMBER NOT NULL ENABLE, 
	 PRIMARY KEY ("LEC_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE, 
	 CONSTRAINT "SEQ_ID_FK" FOREIGN KEY ("SEQ_ID")
	  REFERENCES "SCH"."MEMBER" ("SEQ_ID") ON DELETE CASCADE ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

  CREATE TABLE "SCH"."ASSIGNMENT" 
   (	"LEC_ID" NUMBER NOT NULL ENABLE, 
	"ASIGN_END" DATE, 
	"ASIGN_NAME" VARCHAR2(255 BYTE) NOT NULL ENABLE, 
	"SEQ_ID" NUMBER NOT NULL ENABLE, 
	 CONSTRAINT "LEC_FK" FOREIGN KEY ("LEC_ID")
	  REFERENCES "SCH"."LECTURE" ("LEC_ID") ON DELETE CASCADE ENABLE, 
	 CONSTRAINT "SEQ_ID_ASSIGN_FK" FOREIGN KEY ("SEQ_ID")
	  REFERENCES "SCH"."MEMBER" ("SEQ_ID") ON DELETE CASCADE ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;


CREATE SEQUENCE seq_id START WITH 1 
INCREMENT BY 1 MAXVALUE 10000 NOCACHE NOCYCLE;

CREATE SEQUENCE ent_id START WITH 1 
INCREMENT BY 1 MAXVALUE 10000 NOCACHE NOCYCLE;

CREATE SEQUENCE lec_id START WITH 1 
INCREMENT BY 1 MAXVALUE 10000 NOCACHE NOCYCLE;

COMMIT;